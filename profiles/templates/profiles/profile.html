{% extends "base.html" %}
{% load static %}

{% block extracss %}
  <link href="{% static 'profiles/css/profile.css' %}" rel="stylesheet">
{% endblock %}

{% block page_header%}
  <div class="container-fluid page-header-margin">
    <div class="row">
      <div class="col text-center">
        <h1>My Profile</h1>
      </div>
    </div>
  </div>
{% endblock %}

{% block content %}

<div class="container-fluid">
  <div class="row">
    <!-- order history -->
    <div class="col-12 col-md-5 col-lg-5 offset-1">
      <p class="text-muted">Order History</p>
      {% for order in orders %}
        <div class="accordion" id="accordionExample">
          <div class="accordion-item">
            <h6 class="accordion-header" id="headingOne">
              <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                On {{ order.date }}
              </button>
            </h6>
            {% for item in order.lineitems.all %}
              <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                <div class="accordion-body">
                  <p><a href="{% url 'order_history' order.order_number %}" title="{{ order.order_number }}"
                  >Nr. {{ order.order_number }}
                  </a></p>
                  <p>{{ item.quantity }}x <strong>{{ item.product.name }}</strong></p>
                  <p>Grand total: {{ order.grand_total }}â‚¬</p>
                </div>
              </div>
            {% endfor %}
          </div>
        </div>
      {% endfor %}
    </div>
    <!-- address -->
    <div class="col-12 col-md-4 col-lg-4 offset-1">
      <p class="text-muted">Shipping/Billing Information</p>
        <form class="mt-3" action="{% url 'profile' %}" method="POST" id="profile-update-form">
            {% csrf_token %}
            {{ form|crispy }}
            <p class="text-center">
              <button class="btn btn-dark rounded">Update Information</button>
            </p>
        </form>
    </div>
  </div>
</div>

{% endblock %}